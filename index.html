<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freedom - Overcoming Sexual Sin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 25%, #b19cd9 75%, #c8a2c8 100%);
            min-height: 100vh;
            color: #2c3e50;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 100vw;
            min-height: 100vh;
            position: relative;
            padding-bottom: 80px;
        }

        /* Audio Toggle */
        .audio-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            color: white;
            font-size: 1.3em;
        }

        .audio-toggle:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(0,0,0,0.4);
        }

        /* Back Button */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #8e44ad;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.4em;
            color: #8e44ad;
            font-weight: bold;
        }

        .back-button:hover {
            background: #8e44ad;
            color: white;
            transform: translateY(-3px);
        }

        .back-button.show {
            display: flex;
        }

        /* Welcome Screen */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
        }

        .welcome-content {
            background: rgba(255, 255, 255, 0.97);
            padding: 50px 40px;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            border-top: 5px solid #8e44ad;
        }

        .app-logo {
            font-size: 4em;
            color: #8e44ad;
            margin-bottom: 25px;
        }

        .app-title {
            font-size: 2.4em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.2;
        }

        .app-subtitle {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-bottom: 35px;
            line-height: 1.6;
        }

        .enter-btn {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .enter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
        }

        /* Main App Screens */
        .screen {
            display: none;
            min-height: 100vh;
            padding: 80px 20px 100px 20px;
        }

        .screen.active {
            display: block;
        }

        /* Dashboard */
        .dashboard {
            max-width: 1000px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.97);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-top: 4px solid #8e44ad;
            text-align: center;
        }

        .header-title {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header-subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 25px;
        }

        .encouragement-text {
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #27ae60;
            font-style: italic;
            color: #2c3e50;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .progress-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .progress-card {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .progress-number {
            font-size: 2.5em;
            font-weight: 700;
            display: block;
        }

        .progress-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.97);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            text-align: center;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
            border-left-color: #8e44ad;
        }

        .card-icon {
            font-size: 3em;
            margin-bottom: 20px;
            display: block;
            color: #8e44ad;
        }

        .card-title {
            font-size: 1.6em;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .card-description {
            color: #7f8c8d;
            line-height: 1.6;
            font-size: 1.05em;
        }

        /* Content Containers */
        .content-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.97);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .content-header {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .content-title {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .content-subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content-body {
            padding: 30px;
        }

        /* Biblical Teaching */
        .teaching-section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #8e44ad;
        }

        .teaching-title {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .scripture-verse {
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
            padding: 20px;
            border-radius: 10px;
            font-style: italic;
            color: #2c3e50;
            margin: 15px 0;
            border-left: 4px solid #27ae60;
        }

        .verse-reference {
            font-weight: bold;
            color: #27ae60;
            margin-top: 10px;
        }

        .teaching-explanation {
            line-height: 1.7;
            color: #2c3e50;
            margin-top: 15px;
        }

        /* Journal */
        .journal-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .journal-entry {
            background: rgba(255, 255, 255, 0.97);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #8e44ad;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: #8e44ad;
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Emergency Section */
        .emergency-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .emergency-alert {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .emergency-alert h2 {
            font-size: 2.2em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .emergency-text {
            font-size: 1.2em;
            line-height: 1.6;
        }

        .emergency-grid {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }

        .emergency-card {
            background: rgba(255, 255, 255, 0.97);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-left: 4px solid #8e44ad;
        }

        .emergency-title {
            font-size: 1.4em;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .emergency-verse {
            font-style: italic;
            color: #8e44ad;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .emergency-prayer {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            color: #2c3e50;
            line-height: 1.6;
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn-secondary {
            background: #ecf0f1;
            color: #2c3e50;
            border: 2px solid #bdc3c7;
        }

        .btn-secondary:hover {
            background: #bdc3c7;
        }

        .btn-emergency {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            font-size: 1.1em;
            padding: 15px 30px;
        }

        .btn-emergency:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }

        /* Crisis Support */
        .crisis-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .crisis-alert {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .crisis-alert h2 {
            font-size: 2.2em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .crisis-text {
            font-size: 1.2em;
            line-height: 1.6;
        }

        .support-grid {
            display: grid;
            gap: 25px;
            margin-top: 30px;
        }

        .support-card {
            background: rgba(255, 255, 255, 0.97);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-left: 4px solid #8e44ad;
            text-align: center;
        }

        .support-title {
            font-size: 1.6em;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .support-description {
            color: #7f8c8d;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.15);
            z-index: 1000;
            border-top: 2px solid #8e44ad;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 10px;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 80px;
        }

        .nav-item:hover, .nav-item.active {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
        }

        .nav-icon {
            font-size: 1.5em;
            margin-bottom: 5px;
            color: #8e44ad;
        }

        .nav-item:hover .nav-icon, .nav-item.active .nav-icon {
            color: white;
        }

        .nav-label {
            font-size: 0.8em;
            color: #2c3e50;
            font-weight: 600;
        }

        .nav-item:hover .nav-label, .nav-item.active .nav-label {
            color: white;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            border-top: 4px solid #8e44ad;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.8em;
            cursor: pointer;
            color: #7f8c8d;
        }

        .modal-close:hover {
            color: #8e44ad;
        }

        .modal-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: 700;
        }

        .modal-text {
            line-height: 1.6;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .donate-btn {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin: 15px 0;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .donate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Success Messages */
        .success-message {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .success-message.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .welcome-content {
                padding: 35px 25px;
                margin: 20px;
            }

            .header-title {
                font-size: 2em;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .progress-overview {
                grid-template-columns: repeat(2, 1fr);
            }

            .content-body {
                padding: 20px;
            }

            .bottom-nav {
                padding: 10px 0;
            }

            .nav-icon {
                font-size: 1.3em;
            }

            .nav-label {
                font-size: 0.7em;
            }
        }

        @media (max-width: 480px) {
            .screen {
                padding: 70px 15px 90px 15px;
            }

            .content-container {
                margin: 10px;
            }

            .content-header, .content-body {
                padding: 20px;
            }

            .modal-content {
                margin: 10px;
                padding: 20px;
            }

            .progress-overview {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Audio Toggle -->
        <button class="audio-toggle" onclick="toggleAudio()" id="audioToggle">
            🎵
        </button>

        <!-- Back Button -->
        <button class="back-button" onclick="goBack()" id="backButton">
            ←
        </button>

        <!-- Background Audio -->
        <audio id="backgroundAudio" loop>
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2Id" type="audio/wav">
        </audio>

        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="welcome-screen">
            <div class="welcome-content">
                <div class="app-logo">🕊️</div>
                <h1 class="app-title">Freedom</h1>
                <p class="app-subtitle">A safe place to find freedom from sexual sin, shame, and addiction through God's grace and truth</p>
                <button class="enter-btn" onclick="enterApp()">Begin Your Journey</button>
            </div>
        </div>

        <!-- Home Dashboard -->
        <div id="homeScreen" class="screen">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h1 class="header-title">Your Freedom Journey</h1>
                    <p class="header-subtitle">You are not alone. God loves you. There is hope.</p>
                    
                    <div class="encouragement-text">
                        "There is therefore now no condemnation for those who are in Christ Jesus." - Romans 8:1
                    </div>

                    <div class="progress-overview">
                        <div class="progress-card">
                            <span class="progress-number" id="cleanDays">7</span>
                            <span class="progress-label">Days of Victory</span>
                        </div>
                        <div class="progress-card">
                            <span class="progress-number" id="journalEntries">12</span>
                            <span class="progress-label">Journal Entries</span>
                        </div>
                        <div class="progress-card">
                            <span class="progress-number" id="prayersSaid">28</span>
                            <span class="progress-label">Prayers Spoken</span>
                        </div>
                        <div class="progress-card">
                            <span class="progress-number" id="versesRead">15</span>
                            <span class="progress-label">Scriptures Read</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card" onclick="showScreen('biblicalTeaching')">
                        <span class="card-icon">📖</span>
                        <h3 class="card-title">Biblical Truth</h3>
                        <p class="card-description">Understand God's design for sexuality, the nature of sin, and the hope of redemption</p>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('emergencyHelp')">
                        <span class="card-icon">🚨</span>
                        <h3 class="card-title">Emergency Help</h3>
                        <p class="card-description">Immediate access to scriptures, prayers, and strategies for moments of temptation</p>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('journalTracker')">
                        <span class="card-icon">📝</span>
                        <h3 class="card-title">Journal & Tracker</h3>
                        <p class="card-description">Track triggers, record victories, and journal your thoughts and progress</p>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('devotionals')">
                        <span class="card-icon">💭</span>
                        <h3 class="card-title">Daily Devotionals</h3>
                        <p class="card-description">Real talk about God's design, singleness, healing from shame, and living in freedom</p>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('accountability')">
                        <span class="card-icon">🤝</span>
                        <h3 class="card-title">Accountability</h3>
                        <p class="card-description">Connect with trusted friends and mentors for support and encouragement</p>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('progress')">
                        <span class="card-icon">📊</span>
                        <h3 class="card-title">Progress Tracking</h3>
                        <p class="card-description">See your growth over time and celebrate victories along the way</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Biblical Teaching Screen -->
        <div id="biblicalTeaching" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Biblical Truth</h2>
                    <p class="content-subtitle">Understanding God's design, the reality of sin, and the hope of grace</p>
                </div>
                <div class="content-body">
                    <div class="teaching-section">
                        <h3 class="teaching-title">God's Design for Sexuality</h3>
                        <div class="scripture-verse">
                            "So God created mankind in his own image, in the image of God he created them; male and female he created them."
                            <div class="verse-reference">Genesis 1:27</div>
                        </div>
                        <div class="teaching-explanation">
                            God created human sexuality as a beautiful gift to be expressed within marriage. Sexual desire itself is not sinful—it's how God designed us. However, when sexual desire is pursued outside of God's intended design, it becomes sin that separates us from Him and harms us.
                        </div>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">The Reality of Lust and Sexual Sin</h3>
                        <div class="scripture-verse">
                            "But I tell you that anyone who looks at a woman lustfully has already committed adultery with her in his heart."
                            <div class="verse-reference">Matthew 5:28</div>
                        </div>
                        <div class="teaching-explanation">
                            Jesus teaches that sexual sin begins in the heart and mind. Pornography and masturbation often involve lustful thoughts and desires that dishonor God and others. This doesn't mean you're beyond hope—it means you need the same grace we all need.
                        </div>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Your Body is Sacred</h3>
                        <div class="scripture-verse">
                            "Do you not know that your bodies are temples of the Holy Spirit, who is in you, whom you have received from God? You are not your own; you were bought at a price. Therefore honor God with your bodies."
                            <div class="verse-reference">1 Corinthians 6:19-20</div>
                        </div>
                        <div class="teaching-explanation">
                            As a believer, your body is not your own—it belongs to God. This means sexual activity outside of marriage, including masturbation when fueled by lust, dishonors the temple of the Holy Spirit. But remember: you are "bought at a price" by Jesus' sacrifice.
                        </div>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Freedom Through Grace</h3>
                        <div class="scripture-verse">
                            "If we confess our sins, he is faithful and just and will forgive us our sins and purify us from all unrighteousness."
                            <div class="verse-reference">1 John 1:9</div>
                        </div>
                        <div class="teaching-explanation">
                            No matter how deep your struggle or how many times you've fallen, God's grace is greater than your sin. Confession brings forgiveness, and the Holy Spirit provides power for transformation. You are not defined by your struggles—you are defined by Christ's love for you.
                        </div>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">The Path to Holiness</h3>
                        <div class="scripture-verse">
                            "It is God's will that you should be sanctified: that you should avoid sexual immorality; that each of you should learn to control your own body in a way that is holy and honorable."
                            <div class="verse-reference">1 Thessalonians 4:3-4</div>
                        </div>
                        <div class="teaching-explanation">
                            God calls us to holiness not to restrict our joy, but to give us true freedom and fulfillment. Learning self-control honors God and protects our hearts, minds, and relationships. This is a process that requires grace, community, and dependence on the Holy Spirit.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Emergency Help Screen -->
        <div id="emergencyHelp" class="screen">
            <div class="emergency-container">
                <div class="emergency-alert">
                    <h2>🚨 Emergency Support</h2>
                    <div class="emergency-text">
                        When temptation feels overwhelming, remember: God always provides a way out. You are stronger than you think because Christ lives in you.
                    </div>
                </div>

                <div class="emergency-grid">
                    <div class="emergency-card">
                        <div class="emergency-title">Immediate Scripture</div>
                        <div class="emergency-verse">
                            "No temptation has overtaken you except what is common to mankind. And God is faithful; he will not let you be tempted beyond what you can bear. But when you are tempted, he will also provide a way out so that you can endure it."
                        </div>
                        <div class="verse-reference">1 Corinthians 10:13</div>
                        <div class="emergency-prayer">
                            <strong>Pray Now:</strong> "Lord, I feel weak right now, but You are strong in me. Show me the way out. Fill me with Your Spirit and help me honor You with my choices. Amen."
                        </div>
                    </div>

                    <div class="emergency-card">
                        <div class="emergency-title">Battle Verses</div>
                        <div class="emergency-verse">
                            "I have hidden your word in my heart that I might not sin against you."
                        </div>
                        <div class="verse-reference">Psalm 119:11</div>
                        <button class="btn btn-primary" onclick="showBattleVerses()">More Battle Verses</button>
                    </div>

                    <div class="emergency-card">
                        <div class="emergency-title">Quick Strategies</div>
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>STOP</strong> - Don't negotiate with temptation</li>
                            <li><strong>MOVE</strong> - Change your location immediately</li>
                            <li><strong>PRAY</strong> - Call out to God for help</li>
                            <li><strong>CALL</strong> - Contact your accountability partner</li>
                            <li><strong>SCRIPTURE</strong> - Read God's word aloud</li>
                            <li><strong>SERVE</strong> - Do something for someone else</li>
                        </ul>
                    </div>

                    <div class="emergency-card">
                        <div class="emergency-title">Emergency Actions</div>
                        <div style="display: grid; gap: 15px;">
                            <button class="btn btn-emergency" onclick="openPhoneDialer()">📞 Call Someone Now</button>
                            <button class="btn btn-secondary" onclick="composeEmergencyEmail()" style="width: 100%;">📧 Email for Help</button>
                            <button class="btn btn-secondary" onclick="openTextMessage()" style="width: 100%;">💬 Text Someone</button>
                            <button class="btn btn-secondary" onclick="findLocalSupport()" style="width: 100%;">🏥 Find Local Support</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Journal & Tracker Screen -->
        <div id="journalTracker" class="screen">
            <div class="journal-container">
                <div class="content-container">
                    <div class="content-header">
                        <h2 class="content-title">Journal & Tracker</h2>
                        <p class="content-subtitle">Track your triggers, victories, and spiritual growth</p>
                    </div>
                    <div class="content-body">
                        <div class="form-group">
                            <button class="btn btn-primary" onclick="addJournalEntry()">New Journal Entry</button>
                            <button class="btn btn-secondary" onclick="logVictory()" style="margin-left: 10px;">Log Victory</button>
                            <button class="btn btn-secondary" onclick="reportStruggle()" style="margin-left: 10px;">Report Struggle</button>
                        </div>

                        <div class="journal-entry" id="todayEntry">
                            <h3 style="color: #8e44ad; margin-bottom: 15px;">Today's Check-in</h3>
                            <div class="form-group">
                                <label class="form-label">How are you feeling spiritually today?</label>
                                <select class="form-select" id="spiritualFeeling">
                                    <option value="">Select...</option>
                                    <option value="strong">Strong and connected to God</option>
                                    <option value="good">Pretty good, trusting God</option>
                                    <option value="struggling">Struggling but seeking God</option>
                                    <option value="distant">Feeling distant from God</option>
                                    <option value="overwhelmed">Overwhelmed and need help</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">What triggers did you face today?</label>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="checkbox" id="trigger-stress"> Stress/Anxiety
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="checkbox" id="trigger-loneliness"> Loneliness
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="checkbox" id="trigger-boredom"> Boredom
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="checkbox" id="trigger-anger"> Anger/Frustration
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="checkbox" id="trigger-media"> Social Media/Internet
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 8px;">
                                        <input type="checkbox" id="trigger-tired"> Being Tired
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Reflection & Prayer Requests</label>
                                <textarea class="form-textarea" id="journalReflection" placeholder="What is God teaching you? How can others pray for you? What victories can you celebrate?"></textarea>
                            </div>

                            <button class="btn btn-primary" onclick="saveJournalEntry()">Save Entry</button>
                        </div>

                        <div id="journalHistory" style="margin-top: 30px;">
                            <h3 style="color: #8e44ad; margin-bottom: 20px;">Recent Entries</h3>
                            <!-- Journal entries will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Devotionals Screen -->
        <div id="devotionals" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Daily Devotionals</h2>
                    <p class="content-subtitle">Real talk about God's design, healing, and living in freedom</p>
                </div>
                <div class="content-body">
                    <div class="teaching-section">
                        <h3 class="teaching-title">Day 1: You Are Not Your Struggle</h3>
                        <div class="scripture-verse">
                            "But he said to me, 'My grace is sufficient for you, for my power is made perfect in weakness.' Therefore I will boast all the more gladly about my weaknesses, so that Christ's power may rest on me."
                            <div class="verse-reference">2 Corinthians 12:9</div>
                        </div>
                        <div class="teaching-explanation">
                            Your struggle with sexual sin does not define you. You are not "the porn addict" or "the guy who can't stop masturbating." You are a beloved child of God who happens to struggle in this area. God's grace is not just sufficient—it's abundant, and His power shows up most clearly in our weakness. Today, remember that your identity is found in Christ, not in your struggles or even your victories.
                        </div>
                        <button class="btn btn-primary" onclick="markDevotionalComplete(1)">Mark Complete</button>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Day 2: The Gift of Singleness</h3>
                        <div class="scripture-verse">
                            "I wish that all of you were as I am. But each of you has your own gift from God; one has this gift, another has that."
                            <div class="verse-reference">1 Corinthians 7:7</div>
                        </div>
                        <div class="teaching-explanation">
                            If you're single, this isn't a waiting period or a punishment—it's a gift. Paul actually preferred singleness because it allows for undivided devotion to God. Sexual desire doesn't disappear when you're single, but it can be surrendered to God and channeled into passion for His kingdom. Your singleness has purpose, and your sexual purity honors both God and your future spouse.
                        </div>
                        <button class="btn btn-primary" onclick="markDevotionalComplete(2)">Mark Complete</button>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Day 3: Shame Has No Place Here</h3>
                        <div class="scripture-verse">
                            "Therefore, there is now no condemnation for those who are in Christ Jesus."
                            <div class="verse-reference">Romans 8:1</div>
                        </div>
                        <div class="teaching-explanation">
                            Shame whispers, "You're too far gone. God could never love someone like you." But shame is a liar. Conviction says, "This behavior doesn't align with who God made you to be." Shame says, "You ARE bad." Conviction says, "You DID something bad, but you can change." God's voice never brings shame—only loving correction and hope for transformation.
                        </div>
                        <button class="btn btn-primary" onclick="markDevotionalComplete(3)">Mark Complete</button>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Day 4: Community Over Secrecy</h3>
                        <div class="scripture-verse">
                            "Therefore confess your sins to each other and pray for each other so that you may be healed. The prayer of a righteous person is powerful and effective."
                            <div class="verse-reference">James 5:16</div>
                        </div>
                        <div class="teaching-explanation">
                            Sexual sin thrives in secrecy and isolation. But confession to a trusted believer breaks the power of shame and opens the door to healing. You don't need to tell everyone, but you do need to tell someone. Choose wisely—find a mature believer who will love you, pray for you, and hold you accountable with grace.
                        </div>
                        <button class="btn btn-primary" onclick="markDevotionalComplete(4)">Mark Complete</button>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Day 5: Fighting Lies with Truth</h3>
                        <div class="scripture-verse">
                            "Finally, brothers and sisters, whatever is true, whatever is noble, whatever is right, whatever is pure, whatever is lovely, whatever is admirable—if anything is excellent or praiseworthy—think about such things."
                            <div class="verse-reference">Philippians 4:8</div>
                        </div>
                        <div class="teaching-explanation">
                            Sexual sin begins with lies: "Just this once," "No one will know," "I deserve this pleasure," "God doesn't really care about this." But lies must be fought with truth. Fill your mind with what is pure, noble, and praiseworthy. When temptation comes, speak truth aloud: "I am chosen by God. My body is His temple. This will not satisfy me. God has something better."
                        </div>
                        <button class="btn btn-primary" onclick="markDevotionalComplete(5)">Mark Complete</button>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Day 6: The True Source of Satisfaction</h3>
                        <div class="scripture-verse">
                            "Jesus answered, 'Everyone who drinks this water will be thirsty again, but whoever drinks the water I give them will never thirst. Indeed, the water I give them will become in them a spring of water welling up to eternal life.'"
                            <div class="verse-reference">John 4:13-14</div>
                        </div>
                        <div class="teaching-explanation">
                            Sexual sin promises satisfaction but always leaves you more thirsty. It's like drinking salt water—the more you drink, the thirstier you become. Only Jesus can satisfy the deep longings of your heart. When you're tempted, remember that what you're really seeking—intimacy, pleasure, connection—can only be truly found in relationship with God.
                        </div>
                        <button class="btn btn-primary" onclick="markDevotionalComplete(6)">Mark Complete</button>
                    </div>

                    <div class="teaching-section">
                        <h3 class="teaching-title">Day 7: Your Future Self Will Thank You</h3>
                        <div class="scripture-verse">
                            "Do not be deceived: God cannot be mocked. A man reaps what he sows. Whoever sows to please their flesh, from the flesh will reap destruction; whoever sows to please the Spirit, from the Spirit will reap eternal life."
                            <div class="verse-reference">Galatians 6:7-8</div>
                        </div>
                        <div class="teaching-explanation">
                            Every choice you make today is planting seeds for your future. When you choose purity, you're sowing seeds of freedom, peace, and genuine intimacy. When you choose sexual sin, you're sowing seeds of shame, addiction, and broken relationships. In moments of temptation, think about your future self—the person you want to become, the relationships you want to have, the legacy you want to leave.
                        </div>
                        <button class="btn btn-primary" onclick="markDevotionalComplete(7)">Mark Complete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Accountability Screen -->
        <div id="accountability" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Accountability Partners</h2>
                    <p class="content-subtitle">Connect with trusted friends for support and encouragement</p>
                </div>
                <div class="content-body">
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 15px; margin-bottom: 25px; border-left: 5px solid #27ae60;">
                        <h4 style="color: #27ae60; margin-bottom: 10px;">Why Accountability Matters</h4>
                        <p style="color: #2c3e50; line-height: 1.6;">
                            Sexual sin thrives in isolation and secrecy. Accountability brings your struggle into the light where healing can begin. A good accountability partner will ask hard questions, pray for you, and remind you of truth when you're struggling.
                        </p>
                    </div>

                    <div class="form-group">
                        <button class="btn btn-primary" onclick="addAccountabilityPartner()">Add Accountability Partner</button>
                    </div>

                    <div id="partnersList" style="margin-top: 30px;">
                        <h3 style="color: #8e44ad; margin-bottom: 20px;">Accountability Tools</h3>
                        
                        <div class="journal-entry">
                            <h4 style="color: #2c3e50; margin-bottom: 15px;">📞 Contact Your Support Network</h4>
                            <p style="color: #7f8c8d; margin-bottom: 15px;">Use these tools to reach out to your accountability partners</p>
                            <div style="display: grid; gap: 15px;">
                                <button class="btn btn-primary" onclick="openPhoneDialer()">📞 Call Someone</button>
                                <button class="btn btn-secondary" onclick="composeAccountabilityEmail()">📧 Send Accountability Email</button>
                                <button class="btn btn-secondary" onclick="openTextMessage()">💬 Text for Support</button>
                            </div>
                        </div>

                        <div class="journal-entry">
                            <h4 style="color: #2c3e50; margin-bottom: 15px;">📝 Accountability Check-in Form</h4>
                            <p style="color: #7f8c8d; margin-bottom: 15px;">Fill this out and share with your accountability partner</p>
                            <div class="form-group">
                                <label class="form-label">This week, I have:</label>
                                <select class="form-select" id="weeklyCheckIn">
                                    <option value="">Select...</option>
                                    <option value="stayed-pure">Stayed completely pure</option>
                                    <option value="struggled-won">Struggled but overcame temptation</option>
                                    <option value="fell-once">Fell once but confessed and repented</option>
                                    <option value="multiple-struggles">Had multiple struggles this week</option>
                                    <option value="need-help">Really need help and support</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Prayer request for this week:</label>
                                <textarea class="form-textarea" id="prayerRequest" placeholder="How can your accountability partner pray for you?"></textarea>
                            </div>
                            <button class="btn btn-primary" onclick="generateCheckInReport()">Generate Check-in Report</button>
                        </div>

                        <div class="journal-entry">
                            <h4 style="color: #2c3e50; margin-bottom: 15px;">🤝 How to Find an Accountability Partner</h4>
                            <ul style="line-height: 1.8; color: #2c3e50;">
                                <li><strong>Look for spiritual maturity:</strong> Someone further along in their faith journey</li>
                                <li><strong>Choose trustworthy people:</strong> Someone who keeps confidences and won't judge</li>
                                <li><strong>Find regular contact:</strong> Someone willing to check in weekly</li>
                                <li><strong>Ask your pastor:</strong> Church leadership often knows mature believers</li>
                                <li><strong>Start with one person:</strong> Better to have one committed partner than several casual ones</li>
                            </ul>
                        </div>
                    </div>

                    <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 15px;">
                        <h4 style="color: #8e44ad; margin-bottom: 15px;">Accountability Questions</h4>
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li>How has your relationship with God been this week?</li>
                            <li>Have you viewed any pornographic material?</li>
                            <li>Have you engaged in masturbation?</li>
                            <li>What triggers or temptations have you faced?</li>
                            <li>How can I pray for you specifically?</li>
                            <li>What victories can we celebrate together?</li>
                            <li>Are you being honest with me right now?</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Tracking Screen -->
        <div id="progress" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Progress Tracking</h2>
                    <p class="content-subtitle">Celebrate victories and learn from setbacks</p>
                </div>
                <div class="content-body">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; padding: 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;">7</div>
                            <div style="font-size: 1.1em;">Current Victory Streak</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;">21</div>
                            <div style="font-size: 1.1em;">Longest Streak</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f39c12, #e67e22); color: white; padding: 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;">85%</div>
                            <div style="font-size: 1.1em;">Success Rate (30 days)</div>
                        </div>
                    </div>

                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                        <h4 style="color: #8e44ad; margin-bottom: 20px;">Weekly Progress</h4>
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px;">
                            <div style="text-align: center;">
                                <div style="color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px;">Mon</div>
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: #27ae60; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto;">✓</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px;">Tue</div>
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: #27ae60; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto;">✓</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px;">Wed</div>
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: #e74c3c; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto;">✗</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px;">Thu</div>
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: #27ae60; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto;">✓</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px;">Fri</div>
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: #27ae60; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto;">✓</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px;">Sat</div>
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: #27ae60; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto;">✓</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px;">Sun</div>
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: #27ae60; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto;">✓</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                        <h4 style="color: #8e44ad; margin-bottom: 20px;">Most Common Triggers</h4>
                        <div style="display: grid; gap: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: white; border-radius: 10px;">
                                <span style="color: #2c3e50; font-weight: 600;">Stress/Anxiety</span>
                                <div style="background: #e74c3c; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.9em;">45%</div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: white; border-radius: 10px;">
                                <span style="color: #2c3e50; font-weight: 600;">Loneliness</span>
                                <div style="background: #f39c12; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.9em;">30%</div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: white; border-radius: 10px;">
                                <span style="color: #2c3e50; font-weight: 600;">Boredom</span>
                                <div style="background: #f39c12; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.9em;">25%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Crisis Support Screen -->
        <div id="crisisScreen" class="screen">
            <div class="crisis-container">
                <div class="crisis-alert">
                    <h2>🆘 Crisis Support</h2>
                    <div class="crisis-text">
                        If you are in crisis, please contact your local helpline for immediate support.
                        Remember: You are loved, you are not alone, and there is always hope.
                    </div>
                </div>

                <div class="support-grid">
                    <div class="support-card">
                        <div class="support-title">God Still Loves You</div>
                        <div class="support-description">
                            No matter what you've done or how many times you've fallen, God's love for you never changes. His grace is bigger than your sin.
                        </div>
                        <div class="scripture-verse">
                            "But God demonstrates his own love for us in this: While we were still sinners, Christ died for us."
                            <div class="verse-reference">Romans 5:8</div>
                        </div>
                    </div>

                    <div class="support-card">
                        <div class="support-title">This Doesn't Define You</div>
                        <div class="support-description">
                            Your struggle with sexual sin is not your identity. You are a beloved child of God who happens to struggle in this area.
                        </div>
                        <div class="scripture-verse">
                            "See what great love the Father has lavished on us, that we should be called children of God! And that is what we are!"
                            <div class="verse-reference">1 John 3:1</div>
                        </div>
                    </div>

                    <div class="support-card">
                        <div class="support-title">Freedom is Possible</div>
                        <div class="support-description">
                            Countless believers have found freedom from sexual addiction. With God's help, accountability, and persistence, you can too.
                        </div>
                        <div class="scripture-verse">
                            "So if the Son sets you free, you will be free indeed."
                            <div class="verse-reference">John 8:36</div>
                        </div>
                    </div>

                    <div class="support-card">
                        <div class="support-title">Take the Next Step</div>
                        <div class="support-description">
                            Don't try to do this alone. Reach out to a pastor, counselor, or trusted friend. Professional help is available and there's no shame in seeking it.
                        </div>
                        <button class="btn btn-primary" onclick="findProfessionalHelp()">Find Professional Help</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources Screen -->
        <div id="resourcesScreen" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Resources & Support</h2>
                    <p class="content-subtitle">Additional tools and materials for your freedom journey</p>
                </div>
                <div class="content-body">
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                        <h4 style="color: #8e44ad; margin-bottom: 20px;">Recommended Reading</h4>
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>"Every Man's Battle" by Stephen Arterburn</strong> - Practical strategies for sexual purity</li>
                            <li><strong>"The Purity Principle" by Randy Alcorn</strong> - God's design for sex and purity</li>
                            <li><strong>"Finally Free" by Heath Lambert</strong> - Biblical counseling approach to sexual addiction</li>
                            <li><strong>"Sex, Romance & Jesus" by Jason Evert</strong> - Catholic perspective on sexual purity</li>
                            <li><strong>"Surfing for God" by Michael John Cusick</strong> - Understanding the heart behind sexual addiction</li>
                        </ul>
                    </div>

                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                        <h4 style="color: #8e44ad; margin-bottom: 20px;">Online Resources</h4>
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>Covenant Eyes</strong> - Internet accountability and filtering</li>
                            <li><strong>Fortify Program</strong> - Science-based recovery for pornography addiction</li>
                            <li><strong>Pure Desire Ministries</strong> - Groups and resources for sexual integrity</li>
                            <li><strong>Fight the New Drug</strong> - Education about pornography's impact</li>
                            <li><strong>Setting Captives Free</strong> - Online biblical courses for sexual purity</li>
                        </ul>
                    </div>

                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                        <h4 style="color: #8e44ad; margin-bottom: 20px;">Emergency Strategies</h4>
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>The HALT Check:</strong> Are you Hungry, Angry, Lonely, or Tired?</li>
                            <li><strong>20-Minute Rule:</strong> Tell yourself you'll wait 20 minutes, then reassess</li>
                            <li><strong>Change Location:</strong> Immediately move to a public or different space</li>
                            <li><strong>Call Someone:</strong> Contact accountability partner or friend</li>
                            <li><strong>Physical Exercise:</strong> Do pushups, go for a walk, or hit the gym</li>
                            <li><strong>Scripture Meditation:</strong> Read and memorize battle verses</li>
                            <li><strong>Serve Others:</strong> Focus on helping someone else</li>
                        </ul>
                    </div>

                    <div style="background: #e8f5e8; padding: 25px; border-radius: 15px; border-left: 5px solid #27ae60;">
                        <h4 style="color: #27ae60; margin-bottom: 15px;">Remember: Progress, Not Perfection</h4>
                        <p style="color: #2c3e50; line-height: 1.6;">
                            Recovery is a journey, not a destination. There will be setbacks and victories. What matters is that you keep fighting, keep seeking God, and keep moving forward. Every day of victory matters, and every setback is an opportunity to experience God's grace anew.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Modal -->
        <div id="infoModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal('infoModal')">×</button>
                <h2 class="modal-title">📱 App Information</h2>
                
                <div class="modal-text">
                    <strong>What this app does:</strong><br>
                    Freedom provides a safe, grace-centered space for believers struggling with sexual sin including pornography and masturbation. Features include biblical teaching, emergency support, journaling, devotionals, and accountability tools.
                </div>

                <div class="modal-text">
                    <strong>How to use:</strong><br>
                    • Start with Biblical Truth to understand God's design and grace<br>
                    • Use Emergency Help for immediate support during temptation<br>
                    • Journal daily to track triggers and spiritual growth<br>
                    • Read daily devotionals for encouragement and truth<br>
                    • Connect with accountability partners for support<br>
                    • Monitor progress to celebrate victories and learn from setbacks
                </div>

                <div class="modal-text">
                    <strong>Install on your phone:</strong><br>
                    📱 <strong>iPhone:</strong> Tap Share → Add to Home Screen<br>
                    📱 <strong>Android:</strong> Tap Menu → Add to Home Screen
                </div>

                <div class="modal-text">
                    <strong>Privacy & Security:</strong><br>
                    All data is stored privately on your device. No personal information is shared or transmitted. The app works offline for maximum privacy and security.
                </div>

                <div class="modal-text">
                    This app is designed for mature believers ready to address sexual sin with honesty, grace, and biblical truth.
                </div>
            </div>
        </div>

        <!-- About Modal -->
        <div id="aboutModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal('aboutModal')">×</button>
                <h2 class="modal-title">ℹ️ About</h2>
                
                <div class="modal-text">
                    <strong>Made by Justin</strong><br>
                    Depths to Heights
                </div>

                <div class="modal-text">
                    <strong>Website:</strong><br>
                    <a href="https://depthstoheights.org" target="_blank" style="color: #8e44ad;">https://depthstoheights.org</a>
                </div>

                <div class="modal-text">
                    <strong>Contact:</strong><br>
                    <a href="mailto:depthstoheights@gmail.com" style="color: #8e44ad;">depthstoheights@gmail.com</a>
                </div>

                <button class="donate-btn" onclick="window.open('https://www.paypal.com/donate/?hosted_button_id=8GRE7B8C3TP2U', '_blank')">
                    💝 Donate via PayPal
                </button>

                <div class="modal-text">
                    <strong>Our Mission:</strong><br>
                    We create digital tools to support spiritual growth, freedom from addiction, and faith-based recovery. Our apps provide safe spaces for believers to address difficult struggles with honesty, grace, and biblical truth.
                </div>

                <div class="modal-text">
                    <strong>Our Heart:</strong><br>
                    Sexual sin thrives in shame and secrecy. We believe that bringing struggles into the light of God's grace and truth creates space for genuine healing and freedom. You are not alone, you are not beyond hope, and God's love for you never changes.
                </div>

                <div class="modal-text" style="font-size: 0.9em; color: #999;">
                    Version 1.0 | © 2024 Depths to Heights
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" onclick="showScreen('homeScreen')">
                <div class="nav-icon">🏠</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="showScreen('crisisScreen')">
                <div class="nav-icon">🆘</div>
                <div class="nav-label">Crisis</div>
            </div>
            <div class="nav-item" onclick="showScreen('resourcesScreen')">
                <div class="nav-icon">📚</div>
                <div class="nav-label">Resources</div>
            </div>
            <div class="nav-item" onclick="showModal('infoModal')">
                <div class="nav-icon">ℹ️</div>
                <div class="nav-label">Info</div>
            </div>
            <div class="nav-item" onclick="showModal('aboutModal')">
                <div class="nav-icon">👤</div>
                <div class="nav-label">About</div>
            </div>
        </nav>
    </div>

    <script>
        // App State
        let appData = {
            cleanDays: 7,
            journalEntries: 12,
            prayersSaid: 28,
            versesRead: 15,
            longestStreak: 21,
            currentStreak: 7,
            successRate: 85,
            lastCheckIn: new Date().toDateString(),
            devotionalsCompleted: [1, 2],
            journalHistory: [],
            triggerData: {
                stress: 45,
                loneliness: 30,
                boredom: 25,
                anger: 20,
                media: 35,
                tired: 15
            },
            accountabilityPartners: [
                { name: 'Mike Johnson', type: 'Friend from church', added: '2 weeks ago' },
                { name: 'Pastor David', type: 'Spiritual mentor', added: '1 month ago' }
            ]
        };

        let currentScreen = 'homeScreen';
        let screenHistory = [];

        // Initialize app
        function initializeApp() {
            loadAppData();
            updateDashboardStats();
            loadJournalHistory();
        }

        // Enter app from welcome screen
        function enterApp() {
            document.getElementById('welcomeScreen').style.display = 'none';
            showScreen('homeScreen');
        }

        // Screen navigation with history
        function showScreen(screenId) {
            if (currentScreen !== screenId) {
                screenHistory.push(currentScreen);
                if (screenHistory.length > 10) {
                    screenHistory.shift();
                }
            }

            // Hide all screens
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.remove('active'));
            
            // Show target screen
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
            
            // Update navigation
            updateNavigation(screenId);
            updateBackButton(screenId);
        }

        function goBack() {
            if (screenHistory.length > 0) {
                const previousScreen = screenHistory.pop();
                showScreen(previousScreen);
            } else {
                showScreen('homeScreen');
            }
        }

        function updateBackButton(screenId) {
            const backButton = document.getElementById('backButton');
            if (screenId === 'homeScreen' || screenId === 'welcomeScreen') {
                backButton.classList.remove('show');
            } else {
                backButton.classList.add('show');
            }
        }

        function updateNavigation(activeScreen) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Map screen to nav item
            const navMap = {
                'homeScreen': 0,
                'crisisScreen': 1,
                'resourcesScreen': 2
            };
            
            if (navMap[activeScreen] !== undefined) {
                navItems[navMap[activeScreen]].classList.add('active');
            }
        }

        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Audio controls
        let audioPlaying = false;
        function toggleAudio() {
            const audio = document.getElementById('backgroundAudio');
            const button = document.getElementById('audioToggle');
            
            if (audioPlaying) {
                audio.pause();
                button.textContent = '🔇';
                audioPlaying = false;
            } else {
                audio.play();
                button.textContent = '🎵';
                audioPlaying = true;
            }
        }

        // Emergency Help Functions
        function showBattleVerses() {
            const verses = [
                { verse: "I have hidden your word in my heart that I might not sin against you.", ref: "Psalm 119:11" },
                { verse: "Flee from sexual immorality. All other sins a person commits are outside the body, but whoever sins sexually, sins against their own body.", ref: "1 Corinthians 6:18" },
                { verse: "Finally, brothers and sisters, whatever is true, whatever is noble, whatever is right, whatever is pure, whatever is lovely, whatever is admirable—if anything is excellent or praiseworthy—think about such things.", ref: "Philippians 4:8" },
                { verse: "Submit yourselves, then, to God. Resist the devil, and he will flee from you.", ref: "James 4:7" },
                { verse: "But those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary, they will walk and not be faint.", ref: "Isaiah 40:31" }
            ];

            let content = '<h3>Battle Verses</h3>';
            verses.forEach(verse => {
                content += `
                    <div style="margin: 20px 0; padding: 20px; background: #e8f5e8; border-radius: 10px; border-left: 4px solid #27ae60;">
                        <div style="font-style: italic; margin-bottom: 10px; color: #2c3e50;">"${verse.verse}"</div>
                        <div style="color: #27ae60; font-weight: bold;">${verse.ref}</div>
                    </div>
                `;
            });

            showGenericModal('Battle Verses', content);
        }

        function openPhoneDialer() {
            // Actually opens phone dialer with helpful message
            const phoneNumbers = [
                'National Suicide Prevention Lifeline: 988',
                'Crisis Text Line: Text HOME to 741741',
                'SAMHSA Helpline: 1-800-662-4357'
            ];
            
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2>📞 Emergency Contact Options</h2>
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #8e44ad; margin-bottom: 15px;">Crisis Hotlines:</h4>
                        ${phoneNumbers.map(number => `
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 10px 0;">
                                <strong>${number}</strong>
                            </div>
                        `).join('')}
                    </div>
                    <div style="margin: 20px 0;">
                        <h4 style="color: #8e44ad; margin-bottom: 15px;">Call Your Support Network:</h4>
                        <p style="color: #7f8c8d; margin-bottom: 15px;">Tap a number to call directly:</p>
                        <div style="display: grid; gap: 10px;">
                            <a href="tel:988" class="btn btn-emergency">📞 Call 988 (Suicide Prevention)</a>
                            <a href="tel:18006624357" class="btn btn-secondary">📞 Call SAMHSA Helpline</a>
                        </div>
                    </div>
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-top: 20px;">
                        <strong>💡 Personal Contacts:</strong> Add your pastor, trusted friend, or counselor's number to your phone's favorites for quick access during emergencies.
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function composeEmergencyEmail() {
            const subject = encodeURIComponent('Emergency - Need Prayer and Support');
            const body = encodeURIComponent(`Hi,

I'm struggling right now and need your prayers and support. I'm fighting temptation and could really use someone to talk to or pray with.

Here's what's going on:
[Describe your situation]

Here's how you can pray for me:
[Share specific prayer requests]

Thank you for being someone I can reach out to.

In Christ,
[Your name]`);
            
            window.open(`mailto:?subject=${subject}&body=${body}`, '_blank');
            showSuccessMessage('📧 Email template opened! Fill in your contact\'s email address.');
        }

        function openTextMessage() {
            const message = encodeURIComponent('Hey, I\'m struggling right now and could really use your prayers and support. Can we talk?');
            
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2>💬 Send Support Text</h2>
                    <p style="margin-bottom: 20px; color: #7f8c8d;">Copy this message and send to your accountability partner or trusted friend:</p>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; border: 1px solid #ddd;">
                        <p style="color: #2c3e50; line-height: 1.6;">"Hey, I'm struggling right now and could really use your prayers and support. Can we talk?"</p>
                    </div>
                    <div style="display: grid; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="copyTextMessage()">📋 Copy Message</button>
                        <a href="sms:?body=${message}" class="btn btn-secondary">📱 Open Text App</a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function copyTextMessage() {
            const message = "Hey, I'm struggling right now and could really use your prayers and support. Can we talk?";
            navigator.clipboard.writeText(message).then(() => {
                showSuccessMessage('📋 Message copied! Now paste it in your text app and send to your support person.');
            }).catch(() => {
                showSuccessMessage('💬 Message ready! Copy this: "Hey, I\'m struggling right now and could really use your prayers and support. Can we talk?"');
            });
        }

        function findLocalSupport() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2>🏥 Find Local Support</h2>
                    <div style="line-height: 1.8; color: #2c3e50;">
                        <h4 style="color: #8e44ad; margin: 20px 0 10px;">Find Christian Counselors Near You:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Psychology Today:</strong> Search "Christian counselors near me"</li>
                            <li><strong>AACC Directory:</strong> aacc.net/about-us/find-a-counselor/</li>
                            <li><strong>Focus on the Family:</strong> Call 1-855-771-4357 for referrals</li>
                        </ul>
                        
                        <h4 style="color: #8e44ad; margin: 20px 0 10px;">Local Support Groups:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Celebrate Recovery:</strong> Search celebraterecovery.com</li>
                            <li><strong>Pure Desire:</strong> Search puredesire.org for groups</li>
                            <li><strong>Local Churches:</strong> Call and ask about recovery ministries</li>
                        </ul>
                        
                        <h4 style="color: #8e44ad; margin: 20px 0 10px;">Immediate Help:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Your Pastor:</strong> Most effective first step for believers</li>
                            <li><strong>Church Staff:</strong> Often trained in crisis intervention</li>
                            <li><strong>Trusted Small Group Leader:</strong> Someone who knows you personally</li>
                        </ul>
                    </div>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 10px; margin-top: 20px;">
                        <strong>⚠️ If having thoughts of self-harm:</strong> Call 988 immediately or go to your nearest emergency room.
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Journal Functions
        function addJournalEntry() {
            // Reset form
            document.getElementById('spiritualFeeling').value = '';
            document.getElementById('journalReflection').value = '';
            
            // Clear all checkboxes
            const checkboxes = document.querySelectorAll('#todayEntry input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
            
            showSuccessMessage('✏️ Ready for your new journal entry!');
        }

        function saveJournalEntry() {
            const feeling = document.getElementById('spiritualFeeling').value;
            const reflection = document.getElementById('journalReflection').value;
            
            // Get selected triggers
            const triggers = [];
            const triggerCheckboxes = ['stress', 'loneliness', 'boredom', 'anger', 'media', 'tired'];
            triggerCheckboxes.forEach(trigger => {
                if (document.getElementById(`trigger-${trigger}`).checked) {
                    triggers.push(trigger);
                }
            });

            if (feeling && reflection) {
                const entry = {
                    id: Date.now(),
                    date: new Date().toLocaleDateString(),
                    feeling: feeling,
                    triggers: triggers,
                    reflection: reflection
                };

                appData.journalHistory.unshift(entry);
                appData.journalEntries++;
                
                saveAppData();
                updateDashboardStats();
                loadJournalHistory();
                
                showSuccessMessage('📝 Journal entry saved! Thank you for your honesty.');
                
                // Clear form
                addJournalEntry();
            } else {
                showSuccessMessage('❌ Please fill in all required fields.');
            }
        }

        function loadJournalHistory() {
            const historyContainer = document.getElementById('journalHistory');
            let content = '<h3 style="color: #8e44ad; margin-bottom: 20px;">Recent Entries</h3>';
            
            if (appData.journalHistory.length === 0) {
                content += '<p style="color: #7f8c8d; font-style: italic;">No journal entries yet. Start with your first entry above!</p>';
            } else {
                appData.journalHistory.slice(0, 5).forEach(entry => {
                    content += `
                        <div class="journal-entry">
                            <h4 style="color: #2c3e50; margin-bottom: 10px;">${entry.date}</h4>
                            <p style="color: #7f8c8d; margin-bottom: 10px;">Feeling: ${entry.feeling.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</p>
                            <p style="color: #7f8c8d; margin-bottom: 15px;">Triggers: ${entry.triggers.length > 0 ? entry.triggers.join(', ') : 'None reported'}</p>
                            <p style="color: #2c3e50; line-height: 1.6;">${entry.reflection}</p>
                        </div>
                    `;
                });
            }
            
            historyContainer.innerHTML = content;
        }

        function logVictory() {
            appData.cleanDays++;
            appData.currentStreak++;
            if (appData.currentStreak > appData.longestStreak) {
                appData.longestStreak = appData.currentStreak;
            }
            saveAppData();
            updateDashboardStats();
            showSuccessMessage('🎉 Victory logged! God is proud of your choice to honor Him!');
        }

        function reportStruggle() {
            appData.currentStreak = 0;
            saveAppData();
            updateDashboardStats();
            showSuccessMessage('💙 Thank you for your honesty. God\'s grace is new every morning. Keep fighting!');
        }

        // Devotional Functions
        function markDevotionalComplete(dayNumber) {
            if (!appData.devotionalsCompleted.includes(dayNumber)) {
                appData.devotionalsCompleted.push(dayNumber);
                appData.versesRead++;
                saveAppData();
                updateDashboardStats();
                showSuccessMessage(`✅ Day ${dayNumber} devotional completed! God\'s truth is transforming you.`);
            } else {
                showSuccessMessage('📖 You\'ve already completed this devotional. Great job staying consistent!');
            }
        }

        function loadMoreDevotionals() {
            showSuccessMessage('📚 More devotionals coming soon! Keep working through the current ones.');
        }

        // Accountability Functions
        function addAccountabilityPartner() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2>🤝 Accountability Partner Guide</h2>
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="color: #27ae60; margin-bottom: 15px;">How to Find the Right Person:</h4>
                        <ul style="color: #2c3e50; line-height: 1.6; margin-left: 20px;">
                            <li>Choose someone spiritually mature and trustworthy</li>
                            <li>Look for someone who won't judge but will ask hard questions</li>
                            <li>Find someone available for regular check-ins</li>
                            <li>Consider asking your pastor for recommendations</li>
                        </ul>
                    </div>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h4 style="color: #8e44ad; margin-bottom: 15px;">Conversation Starter:</h4>
                        <p style="color: #2c3e50; font-style: italic; line-height: 1.6;">
                            "Hi [Name], I'm working on some areas of personal growth and accountability in my spiritual life. Would you be willing to be an accountability partner with me? This would involve checking in weekly about my spiritual health and praying for each other. I really value your wisdom and would appreciate your support."
                        </p>
                    </div>
                    <button class="btn btn-primary" onclick="this.closest('.modal').remove()" style="margin-top: 20px;">Got It, Thanks!</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function composeAccountabilityEmail() {
            const subject = encodeURIComponent('Weekly Accountability Check-in');
            const body = encodeURIComponent(`Hi [Accountability Partner Name],

Here's my weekly check-in:

SPIRITUAL HEALTH:
- How my walk with God has been this week: 
- Bible reading/prayer consistency: 
- Areas I'm growing in: 

ACCOUNTABILITY:
- Struggles I've faced this week: 
- Victories I can celebrate: 
- Specific temptations I've overcome: 
- Areas where I need your prayers: 

PRAYER REQUESTS:
- Please pray for me regarding: 
- How can I pray for you this week: 

HONEST ASSESSMENT:
- Have I been completely honest with you: 
- Areas where I need to confess or seek help: 

Thank you for walking this journey with me.

In Christ,
[Your name]

---
"As iron sharpens iron, so one person sharpens another." - Proverbs 27:17`);
            
            window.open(`mailto:?subject=${subject}&body=${body}`, '_blank');
            showSuccessMessage('📧 Accountability email template opened! Add your partner\'s email address.');
        }

        function generateCheckInReport() {
            const checkIn = document.getElementById('weeklyCheckIn').value;
            const prayerRequest = document.getElementById('prayerRequest').value;
            
            if (!checkIn) {
                showSuccessMessage('❌ Please select your weekly status first.');
                return;
            }
            
            const statusMap = {
                'stayed-pure': 'I stayed completely pure this week! Praise God!',
                'struggled-won': 'I faced temptation but overcame it through God\'s strength.',
                'fell-once': 'I fell once this week but immediately confessed and repented.',
                'multiple-struggles': 'I had multiple struggles this week and need extra support.',
                'need-help': 'I really need help and support - please pray for me.'
            };
            
            const report = `WEEKLY ACCOUNTABILITY CHECK-IN
Date: ${new Date().toLocaleDateString()}

STATUS: ${statusMap[checkIn]}

PRAYER REQUEST: ${prayerRequest || 'Please pray for continued strength and purity.'}

ACCOUNTABILITY QUESTIONS TO DISCUSS:
□ How has your relationship with God been this week?
□ Have you viewed any pornographic material?
□ Have you engaged in masturbation?
□ What triggers or temptations have you faced?
□ How can I specifically pray for you?
□ What victories can we celebrate together?
□ Are you being completely honest with me right now?

"Confess your sins to each other and pray for each other so that you may be healed." - James 5:16`;

            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2>📝 Your Check-in Report</h2>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; white-space: pre-line; font-family: monospace; border: 1px solid #ddd;">
                        ${report}
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <button class="btn btn-primary" onclick="copyCheckInReport('${report.replace(/'/g, "\\'").replace(/\n/g, '\\n')}')">📋 Copy Report</button>
                        <button class="btn btn-secondary" onclick="emailCheckInReport('${report.replace(/'/g, "\\'").replace(/\n/g, '\\n')}')">📧 Email Report</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function copyCheckInReport(report) {
            navigator.clipboard.writeText(report).then(() => {
                showSuccessMessage('📋 Check-in report copied! Paste it in a text or email to your accountability partner.');
            }).catch(() => {
                showSuccessMessage('📝 Report ready! Copy the text above and send to your accountability partner.');
            });
        }

        function emailCheckInReport(report) {
            const subject = encodeURIComponent('Weekly Accountability Check-in');
            const body = encodeURIComponent(report);
            window.open(`mailto:?subject=${subject}&body=${body}`, '_blank');
            showSuccessMessage('📧 Email opened with your check-in report!');
        }

        // Crisis Support Functions
        function findProfessionalHelp() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2>Professional Help Resources</h2>
                    <div style="line-height: 1.8; color: #2c3e50;">
                        <h4 style="color: #8e44ad; margin: 20px 0 10px;">Christian Counseling:</h4>
                        <ul style="margin-left: 20px;">
                            <li>American Association of Christian Counselors (AACC)</li>
                            <li>Focus on the Family Counseling Services</li>
                            <li>Local church pastoral counseling</li>
                        </ul>
                        
                        <h4 style="color: #8e44ad; margin: 20px 0 10px;">Support Groups:</h4>
                        <ul style="margin-left: 20px;">
                            <li>Celebrate Recovery groups</li>
                            <li>Pure Desire support groups</li>
                            <li>Sexaholics Anonymous (SA)</li>
                            <li>Sex Addicts Anonymous (SAA)</li>
                        </ul>
                        
                        <h4 style="color: #8e44ad; margin: 20px 0 10px;">Crisis Hotlines:</h4>
                        <ul style="margin-left: 20px;">
                            <li>National Suicide Prevention Lifeline: 988</li>
                            <li>Crisis Text Line: Text HOME to 741741</li>
                            <li>SAMHSA National Helpline: 1-800-662-4357</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary" onclick="this.closest('.modal').remove()">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Utility Functions
        function showGenericModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">${title}</h2>
                    <div class="modal-text">${content}</div>
                    <button class="btn btn-primary" onclick="this.closest('.modal').remove()">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.textContent = message;
            
            document.body.appendChild(successDiv);
            
            // Trigger animation
            setTimeout(() => {
                successDiv.classList.add('show');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                successDiv.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(successDiv)) {
                        document.body.removeChild(successDiv);
                    }
                }, 300);
            }, 3000);
        }

        // Data persistence
        function saveAppData() {
            localStorage.setItem('freedomAppData', JSON.stringify(appData));
        }

        function loadAppData() {
            const saved = localStorage.getItem('freedomAppData');
            if (saved) {
                appData = { ...appData, ...JSON.parse(saved) };
            }
        }

        function updateDashboardStats() {
            document.getElementById('cleanDays').textContent = appData.cleanDays;
            document.getElementById('journalEntries').textContent = appData.journalEntries;
            document.getElementById('prayersSaid').textContent = appData.prayersSaid;
            document.getElementById('versesRead').textContent = appData.versesRead;
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });
    </script>
</body>
</html>